(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["my/identity/identity"],{"0053":function(e,t,n){"use strict";(function(e){n("5471");i(n("66fd"));var t=i(n("47a4"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"290f":function(e,t,n){"use strict";var i=n("ded8"),o=n.n(i);o.a},"3f41":function(e,t,n){"use strict";n.r(t);var i=n("aa05"),o=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},"47a4":function(e,t,n){"use strict";n.r(t);var i=n("5892"),o=n("3f41");for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);n("290f");var a,r=n("f0c5"),c=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);t["default"]=c.exports},5892:function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i}));var o=function(){var e=this,t=e.$createElement;e._self._c},s=[]},aa05:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("45e3"),o=n("45e3"),s={data:function(){return{name:"",idcard:"",imgs:[],picPaths:[],positive:"positive",reverse:"reverse",pos:"",rev:"",type:"",p_flag:!0,r_flag:!0,p_url:"",r_url:"",isClick:!0}},onBackPress:function(e){plus.key.hideSoftKeybord()},methods:{moveHandle:function(e){e.preventDefault(),e.stopPropagation()},getName:function(e){this.name=e.detail.value},getIdcard:function(e){this.idcard=e.detail.value},chooseImageTap:function(t){var n=this,i=t.currentTarget.dataset.flag;e.showActionSheet({itemList:["从相册中选择","拍照"],itemColor:"#00000",success:function(e){e.cancel||(0==e.tapIndex?("positive"==i&&n.chooseWxImage1("album"),"reverse"==i&&n.chooseWxImage2("album")):1==e.tapIndex&&("positive"==i&&n.chooseWxImage1("camera"),"reverse"==i&&n.chooseWxImage2("camera")))}})},chooseWxImage1:function(t){var n=this,i=n.imgs,o={};e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:[t],success:function(e){for(var t=i.length-1;t>=0;t--)for(var s in i[t])"positive"==s&&i.splice(t,1);o.positive=e.tempFilePaths[0],n.imgs.push(o),n.p_url=e.tempFilePaths[0],n.p_flag=!1,n.imgs=n.imgs}})},chooseWxImage2:function(t){var n=this,i=n.imgs,o={};e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:[t],success:function(e){for(var t=i.length-1;t>=0;t--)for(var s in i[t])"reverse"==s&&i.splice(t,1);o.reverse=e.tempFilePaths[0],n.imgs.push(o),n.r_url=e.tempFilePaths[0],n.r_flag=!1,n.imgs=n.imgs,n.rev=i[1].reverse,n.pos=i[0].positive}})},upImgs:function(t,n){var i=this,o=e.getStorageSync("token");for(var s in t[n])e.uploadFile({url:this.url+"realnames/",filePath:t[n][s],name:s,header:{Authorization:"JWT "+o},formData:null,success:function(s){return 400==s.statusCode?(e.showToast({title:"数据异常",icon:"none",duration:2e3}),!1):406==s.statusCode?(e.showToast({title:"图片太大，请重新上传",icon:"none",duration:2e3}),!1):(n++,void(n==t.length?e.request({url:i.url+"realnames/",method:"POST",data:{name:i.name,idcard:i.idcard},header:{Authorization:"JWT "+o},success:function(t){return 402==t.statusCode?(e.showToast({title:"身份证号已存在，请重新认证",icon:"none",duration:2e3}),!1):401==t.statusCode?(e.showToast({title:"身份证号错误",icon:"none"}),!1):410==t.statusCode?(e.showToast({title:"图片格式错误",icon:"none"}),!1):void(200==t.statusCode&&e.redirectTo({url:"../indentity_success/indentity_success?name="+i.name+"&idcard="+i.idcard}))}}):i.upImgs(t,n)))},complete:function(e){i.isClick=!0},fail:function(e){i.isClick=!0}})},linkToTransfer:(0,i.debounce)((function(){var t=this;if(!t.name)return e.showToast({title:"用户名不能为空",icon:"none"}),!1;if(!t.idcard)return e.showToast({title:"身份证号不能为空",icon:"none"}),!1;var n=o.checkIdcard(t.idcard);return n?2!==t.imgs.length?(e.showToast({title:"身份证照不全",icon:"none"}),!1):void(t.isClick&&(t.isClick=!1,t.upImgs(t.imgs,0))):(e.showToast({title:"请输入正确的身份证号",icon:"none",duration:2e3}),!1)}),1e3,!0),submitt:function(){this.linkToTransfer()},sure:function(){e.redirectTo({url:"../../pages/set/set"})}}};t.default=s}).call(this,n("543d")["default"])},ded8:function(e,t,n){}},[["0053","common/runtime","common/vendor"]]]);